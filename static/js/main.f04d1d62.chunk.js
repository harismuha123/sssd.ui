(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,a,t){e.exports=t(329)},186:function(e,a,t){},187:function(e,a,t){},329:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),o=t(31),l=t.n(o),s=(t(186),t(187),t(95)),r=t(144),c=t(145),d=t(166),g=t(146),m=t(167),u=t(342),h=t(343),p=t(165),f=t(340),S=t(344),E=t(331),v=t(341),C=t(338),_=t(339),O=t(96),y=t.n(O),w=t(33),b=t.n(w),V="https://sssd-api.herokuapp.com/auth",I=t(147),L=t.n(I),k=t(148),j=t.n(k)()(L.a),R=function(e,a,t,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return j.fire({title:i.a.createElement(h.a,{as:"h6",textAlign:"center"},i.a.createElement("b",null,e)),type:a,html:i.a.createElement("p",{style:{fontSize:"16px",textAlign:"center"}},t),showCloseButton:!0,focusConfirm:!0,confirmButtonText:i.a.createElement("p",{style:{color:"#ffffff"}},i.a.createElement("b",null,n))}).then(function(){o()})},A=function(e,a,t){a(!0),b.a.post(V+"/login",e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.valid?(localStorage.setItem("user_email",e.data.email),t(!0)):R("Login failed!","error",e.data.message,"CLOSE"),a(!1)}).catch(function(e){R("Login failed!","error",e.response.data.error_message,"CLOSE",function(){a(!1),t(!1)})})},N=function(e){var a=localStorage.getItem("user_email");a&&(e("loading",!0),b.a.get(V+"/login/generate_otp/"+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){a.data.otp?e("otp_qr",a.data.otp):R("Generating QR code failed!","error",a.data.message,"CLOSE"),e("loading",!1)}).catch(function(a){R("Generating QR code failed!","error",a.response.data.error_message,"CLOSE",function(){e("loading",!1)})}))},P=function(e,a){var t=localStorage.getItem("user_email");t&&(a("loading",!0),b.a.post(V+"/login/generate_otp/",{verification_code:e,email:t},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.valid?R("Validation successful!","success",e.data.message,"CLOSE",function(){localStorage.setItem("validated",!0),a("finalValid",!0)}):R("Validation failed!","error",e.data.message,"CLOSE"),a("loading",!1)}).catch(function(e){R("Validation failed!","error",e.response.data.error_message,"CLOSE",function(){a("loading",!1)})}))},J=function(e){var a=localStorage.getItem("user_email");a&&(e("loading",!0),b.a.get(V+"/login/generate_sms/"+a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(a){a.data.success?R("SMS code successfully generated!","success",a.data.message,"CLOSE"):R("Generating code failed!","error",a.data.message,"CLOSE"),e("loading",!1)}).catch(function(a){R("Generating QR code failed!","error",a.response.data.error_message,"CLOSE",function(){e("loading",!1)})}))},T=function(e,a){var t=localStorage.getItem("user_email");t&&(a("loading",!0),b.a.post(V+"/login/generate_sms/",{verification_code:e,email:t},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.valid?R("Validation successful!","success",e.data.message,"CLOSE",function(){localStorage.setItem("validated",!0),a("finalValid",!0)}):R("Validation failed!","error",e.data.message,"CLOSE"),a("loading",!1)}).catch(function(e){R("Validation failed!","error",e.response.data.error_message,"CLOSE",function(){a("loading",!1)})}))},x=function(e,a){a("loading",!0),b.a.post(V+"/register",e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.data.success?R("Registration successful!","success",e.data.message,"CLOSE",function(){a("loading",!1),a("mode","login")}):R("Registration failed!","error",e.data.message,"CLOSE"),a("loading",!1)}).catch(function(e){R("Registration failed!","error",e.response.data.error_message,"CLOSE",function(){a("loading",!1)})})},q=function(e){function a(e){var t;Object(r.a)(this,a),(t=Object(d.a)(this,Object(g.a)(a).call(this,e))).setLoadingState=function(e){t.setState({loading:e})},t.saveState=function(e,a){t.setState(Object(s.a)({},e,a))},t.setInitialValid=function(e){t.setState({initialValid:e})},t.handleSubmit=function(e){e.preventDefault(),A(JSON.parse(JSON.stringify(t.state.login_state)),t.setLoadingState,t.setInitialValid)},t.handleRegisterSubmit=function(e){e.preventDefault(),x(JSON.parse(JSON.stringify(t.state.register_state)),t.saveState)},t.handleValidate=function(e){e.preventDefault(),"qr"===t.state.otp?N(t.saveState):J(t.saveState)},t.handleVerify=function(e){e.preventDefault(),P(JSON.parse(JSON.stringify(t.state.verification_code)),t.saveState)},t.handleVerifySMS=function(e){e.preventDefault(),T(JSON.parse(JSON.stringify(t.state.verification_code)),t.saveState)},t.handleRegisterChange=function(e,a){var n=a.name,i=a.value,o=JSON.parse(JSON.stringify(t.state.register_state));o[n]=i,t.setState({register_state:o})},t.handleChange=function(e,a){var n=a.name,i=a.value,o=JSON.parse(JSON.stringify(t.state.login_state));o[n]=i,t.setState({login_state:o})},t.handleInputChange=function(e,a){var n=a.name,i=a.value;t.setState(Object(s.a)({},n,i))};var n=Boolean(localStorage.getItem("validated"));return t.state={mode:"login",login_state:{username_or_email_address:"",password:"",remember_me:!1},register_state:{name:"",email_address:"",mobile_number:"",username:"",password:"",re_password:""},reset_state:{token:"",old_password:"",new_password:"",re_password:""},verification_code:"",otp_qr:"",otp_sms:"",otp:"qr",loading:!1,initialValid:!1,finalValid:n||!1},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"login-form"},i.a.createElement("style",null,"\n      .login-form {\n          padding-top: 270px;\n      }\n\n      .swal2-popup {\n          height: auto;\n      }\n    "),"login"===this.state.mode?i.a.createElement(u.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},this.state.finalValid||localStorage.getItem("validated")?i.a.createElement("div",null,i.a.createElement("p",null,"You are now logged in!"),i.a.createElement(E.a,{color:"teal",size:"large",onClick:function(){localStorage.clear(),window.location.reload()}},"Sign out")):i.a.createElement(u.a.Column,{style:{maxWidth:450}},this.state.initialValid?this.state.otp_qr.length>0?i.a.createElement("div",null,"qr"===this.state.otp&&i.a.createElement(p.a,{src:this.state.otp_qr,centered:!0,verticalAlign:"middle",size:"medium"}),i.a.createElement(_.a,{focus:!0,placeholder:"OTP Code here...",size:"large",onChange:this.handleInputChange,name:"verification_code"}),i.a.createElement("br",null),i.a.createElement("br",null),"qr"===this.state.otp?i.a.createElement(E.a,{color:"teal",size:"large",loading:this.state.loading,onClick:this.handleVerify},"Validate code"):i.a.createElement(E.a,{color:"teal",size:"large",loading:this.state.loading,onClick:this.handleVerifySMS},"Validate code")):i.a.createElement(f.a,{onSubmit:this.handleValidate,loading:this.state.loading},i.a.createElement(f.a.Field,null,i.a.createElement(C.a,{label:"Validate login with code generated by Google Validator",name:"otp",value:"qr",checked:"qr"===this.state.otp,onChange:this.handleInputChange})),i.a.createElement(f.a.Field,null,i.a.createElement(C.a,{label:"Validate login with code sent by SMS",name:"otp",value:"sms",checked:"sms"===this.state.otp,onChange:this.handleInputChange})),i.a.createElement(E.a,{color:"teal",loading:this.state.loading,fluid:!0,size:"large",onClick:function(){"sms"===e.state.otp&&e.setState({otp_qr:"test"},function(){J(e.saveState)})}},"Validate account")):i.a.createElement("div",null,i.a.createElement(h.a,{as:"h2",color:"teal",textAlign:"center"},i.a.createElement(p.a,{src:y.a})," Log-in to your account"),i.a.createElement(f.a,{size:"large",onSubmit:this.handleSubmit,loading:this.state.loading},i.a.createElement(S.a,{stacked:!0},i.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",name:"username_or_email_address",placeholder:"Username or E-mail address",onChange:this.handleChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:this.handleChange}),i.a.createElement(E.a,{color:"teal",fluid:!0,size:"large"},"Login"))),i.a.createElement(v.a,null,"New to us?"," ",i.a.createElement("span",{style:{color:"#728cd4",cursor:"pointer"},onClick:function(){e.saveState("mode","register")}},"Sign Up"))))):i.a.createElement(u.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},i.a.createElement(u.a.Column,{style:{maxWidth:450}},i.a.createElement(h.a,{as:"h2",color:"teal",textAlign:"center"},i.a.createElement(p.a,{src:y.a})," Register new account"),i.a.createElement(f.a,{size:"large",onSubmit:this.handleRegisterSubmit,loading:this.state.loading},i.a.createElement(S.a,{stacked:!0},i.a.createElement(f.a.Input,{fluid:!0,icon:"user",iconPosition:"left",name:"name",placeholder:"Name and surname",onChange:this.handleRegisterChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"mail",iconPosition:"left",name:"email_address",placeholder:"Email address",onChange:this.handleRegisterChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"phone",iconPosition:"left",name:"mobile_number",placeholder:"Mobile phone number",onChange:this.handleRegisterChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"user secret",iconPosition:"left",name:"username",placeholder:"Username",onChange:this.handleRegisterChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:this.handleRegisterChange}),i.a.createElement(f.a.Input,{fluid:!0,icon:"unlock",iconPosition:"left",placeholder:"Retype password",type:"password",name:"re_password",onChange:this.handleRegisterChange}),i.a.createElement(E.a,{color:"teal",fluid:!0,size:"large"},"Register"))),i.a.createElement(v.a,null,"Already have an account?"," ",i.a.createElement("span",{style:{color:"#728cd4",cursor:"pointer"},onClick:function(){e.saveState("mode","login")}},"Log in")))))}}]),a}(n.Component);var z=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(328);l.a.render(i.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"}},[[181,1,2]]]);
//# sourceMappingURL=main.f04d1d62.chunk.js.map